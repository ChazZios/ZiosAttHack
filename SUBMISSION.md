ZiosAttHack
===========

Zammy Hack Submission Using AT&amp;T Flow Designer 
Import code into AT&T Flow designer 

[{"id":"a913211b.a94858","type":"mqtt-broker","broker":"localhost","port":"1883","hosted":true,"name":"cdevicebroker","configKey":"","username":"","password":"","clientid":""},{"id":"f1129d78.fc2f58","type":"inject","debugBreak":false,"debugOutput":false,"name":"init","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"x":883.13330078125,"y":556,"z":"e4e71777.87cbd","wires":[["3ae43aaf.ed199e"]]},{"id":"3ae43aaf.ed199e","type":"function","debugBreak":false,"debugOutput":false,"name":"init API URL","srcFunc":"","func":"context.global.apiUrl = 'http://mafalda.hack.att.io:5000/luigi/v1/'\nreturn msg;","outputs":1,"x":1079.13330078125,"y":555.9999923706055,"z":"e4e71777.87cbd","wires":[["ca81cb2f.eed3f8"]]},{"id":"ca81cb2f.eed3f8","type":"debug","debugBreak":false,"debugOutput":false,"name":"","active":true,"console":false,"complete":false,"x":1258.1332702636719,"y":560,"z":"e4e71777.87cbd","wires":[]},{"id":"a7a3f4e6.420418","type":"inject","debugBreak":false,"debugOutput":false,"name":"get bluetooth beacon proximity","topic":"get bluetooth beacon proximity","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":823.4666748046875,"y":625.3333129882812,"z":"e4e71777.87cbd","wires":[["b8c92772.cff2d"]]},{"id":"c529e967.d77c08","type":"http request","debugBreak":false,"debugOutput":false,"name":"","method":"GET","url":"","configKey":"","username":"","password":"","useAuth":false,"x":1263.4666748046875,"y":638.3333129882812,"z":"e4e71777.87cbd","wires":[["a9e748f.7002f38"]]},{"id":"b8c92772.cff2d","type":"function","debugBreak":false,"debugOutput":false,"name":"all beacons in proximity","srcFunc":"","func":"msg.url = context.global.apiUrl+'service/vehicle_status';\nreturn msg;","outputs":1,"x":1075.4666748046875,"y":684.3333129882812,"z":"e4e71777.87cbd","wires":[["c529e967.d77c08"]]},{"id":"c84b3731.23f6a","type":"debug","debugBreak":false,"debugOutput":false,"name":"","active":true,"console":"false","complete":"false","x":1571.4666748046875,"y":594.3333129882812,"z":"e4e71777.87cbd","wires":[]},{"id":"a9e748f.7002f38","type":"json","debugBreak":false,"debugOutput":false,"name":"","x":1412.4666442871094,"y":646.3333358764648,"z":"e4e71777.87cbd","wires":[["c84b3731.23f6a","14dc79ad.ac5716"]]},{"id":"f4e46fb7.895b68","type":"inject","debugBreak":false,"debugOutput":false,"name":"emulate location","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":680.4666748046875,"y":800.3333129882812,"z":"e4e71777.87cbd","wires":[["23b4fb69.ba2874"]]},{"id":"b95a0ab0.d2d378","type":"http request","debugBreak":false,"debugOutput":false,"name":"","method":"GET","url":"","configKey":"","username":"","password":"","useAuth":false,"x":1052.4666748046875,"y":737.3333129882812,"z":"e4e71777.87cbd","wires":[["91973958.542b88"]]},{"id":"23b4fb69.ba2874","type":"function","debugBreak":false,"debugOutput":false,"name":"get car location","srcFunc":"","func":"msg.url = context.global.apiUrl+'emulate/odometer';\nmsg.payload = {location: 124}\nreturn msg;","outputs":1,"x":912.4666748046875,"y":808.3333129882812,"z":"e4e71777.87cbd","wires":[["b95a0ab0.d2d378"]]},{"id":"2d7e290e.b7e8e6","type":"debug","debugBreak":false,"debugOutput":false,"name":"","active":true,"console":false,"complete":false,"x":1622.466796875,"y":749.3333129882812,"z":"e4e71777.87cbd","wires":[]},{"id":"91973958.542b88","type":"json","debugBreak":false,"debugOutput":false,"name":"","x":1134.4667358398438,"y":799.3333129882812,"z":"e4e71777.87cbd","wires":[["b696ef12.2ef2c"]]},{"id":"532edf2d.fd1e1","type":"http request","debugBreak":false,"debugOutput":false,"name":"","method":"POST","url":"","configKey":"","username":"","password":"","useAuth":false,"x":1451.4668579101562,"y":778.3333129882812,"z":"e4e71777.87cbd","wires":[["2d7e290e.b7e8e6","a126b26b.5e54f"]]},{"id":"b696ef12.2ef2c","type":"function","debugBreak":false,"debugOutput":false,"name":"post location time/GeoDev","srcFunc":"","func":"delete msg.headers;\nmsg.payload.odometer++;\nreturn msg;","outputs":1,"x":1291.466796875,"y":735.3333129882812,"z":"e4e71777.87cbd","wires":[["532edf2d.fd1e1"]]},{"id":"2a5133c4.1cd5a4","type":"mqtt out","debugBreak":false,"debugOutput":false,"name":"led status bar","topic":"led status bar","broker":"a913211b.a94858","x":1614.75,"y":820.75,"z":"e4e71777.87cbd","wires":[]},{"id":"14dc79ad.ac5716","type":"mqtt out","name":"green light","topic":"green light","broker":"a913211b.a94858","x":1585.5,"y":679.5,"z":"e4e71777.87cbd","wires":[]},{"id":"d50571.b1fc629","type":"function","name":"retrieve driver data from db","srcFunc":"","func":"delete msg.headers;\nmsg=\"driver A\";\nreturn msg;","outputs":1,"x":1087.5,"y":1021.5,"z":"e4e71777.87cbd","wires":[["b3c418ff.37a8"]]},{"id":"b3c418ff.37a8","type":"http request","name":"voice/video chat with driver","method":"GET","url":"","configKey":"","username":"","password":"","useAuth":false,"x":1336.5,"y":986.5,"z":"e4e71777.87cbd","wires":[["f5f2d508.236828","193dd939.ba57a7"]]},{"id":"f5f2d508.236828","type":"debug","name":"","active":true,"console":false,"complete":false,"x":1530.5,"y":881.5,"z":"e4e71777.87cbd","wires":[]},{"id":"a126b26b.5e54f","type":"json","name":"GeoDev route info","x":1314.5,"y":852.5,"z":"e4e71777.87cbd","wires":[["4c4213ab.9b4e8c"]]},{"id":"6df675af.1f0d4c","type":"json","name":"","x":876.5,"y":964.5,"z":"e4e71777.87cbd","wires":[["d50571.b1fc629"]]},{"id":"4c4213ab.9b4e8c","type":"function","name":"get best driver","srcFunc":"","func":"return msg;","outputs":1,"x":729.5,"y":881.5,"z":"e4e71777.87cbd","wires":[["6df675af.1f0d4c"]]},{"id":"193dd939.ba57a7","type":"json","name":"best driver","x":1562.5,"y":947.5,"z":"e4e71777.87cbd","wires":[["6a97e3a0.320b0c","2a5133c4.1cd5a4"]]},{"id":"6a97e3a0.320b0c","type":"http request","name":"","method":"GET","url":"","configKey":"","username":"","password":"","useAuth":false,"x":1578.5,"y":1028.5,"z":"e4e71777.87cbd","wires":[["69c92610.ea6d58"]]},{"id":"69c92610.ea6d58","type":"mqtt out","name":"pickup time to child's device","topic":"pickup time to child's device","broker":"a913211b.a94858","x":1591.5,"y":1093.5,"z":"e4e71777.87cbd","wires":[]},{"id":"2b02c60d.6c6642","type":"inject","debugBreak":false,"debugOutput":false,"name":"get bluetooth beacon proximity","topic":"get bluetooth beacon proximity","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":820,"y":669,"z":"e4e71777.87cbd","wires":[["b8c92772.cff2d"]]},{"id":"d66ec2f8.e5f788","type":"inject","debugBreak":false,"debugOutput":false,"name":"get bluetooth beacon proximity","topic":"get bluetooth beacon proximity","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":818,"y":715.25,"z":"e4e71777.87cbd","wires":[["b8c92772.cff2d"]]}]
